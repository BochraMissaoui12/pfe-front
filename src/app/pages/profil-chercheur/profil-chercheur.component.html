<body>
    <header class="navbar">
        <div class="logo">
            <img src="assets/images/logo.png" alt="Logo">
        </div>
        <nav>
            <ul class="nav-links">
                <li><a routerLink="/">Accueil</a></li>
                <li><a href="#" routerLink="/Mes-théses">Mes Projets</a></li>
                <li><a href="#" routerLink="/liste-offres">Emplois & Stages</a></li>
                <li><a routerLink="/">Contact</a></li>
            </ul>
        </nav>
        <button class="btn-primary" routerLink="/Cprofil" style="background: rgba(0, 168, 232, 1);
        border: none;
        padding: 1vh 2vw;
        border-radius: 36px;
        color: rgba(30, 41, 59, 1);
        font-weight: 400;
        cursor: pointer;
        transition: 0.3s;">Votre profil</button>

        <div class="icons">
            <button class="icon-btn logout" (click)="logout()" style="background-color: transparent;border: none;">
                <i class="fa fa-sign-out-alt"></i>
            </button>
        </div>
        <!-- Menu mobile -->
        <button class="menu-toggle" (click)="toggleMenu()">
            <img src="assets/images/Vector.png" alt="Menu">
        </button>
    </header>
    <div class="profile-container">
        <div class="card">
            <div class="card-header">
                <div class="header-title" style="display: flex;justify-content: space-between;">
                    <h2>{{ chercheur.prenom }} {{ chercheur.nom }}</h2>
                    <!-- Bouton pour ouvrir la modal -->
                    <button type="button" class="btn btn-primary ms-2" data-bs-toggle="modal"
                        data-bs-target="#addProjetModal">
                        <i class="bi bi-plus-circle"></i> Ajouter votre projet de thèse
                    </button>

                </div>
                <div class="subtitle">
                    <span class="icon">
                        <!-- Icône chapeau (titre) -->
                        <svg width="18" height="18" fill="none" stroke="#5c6f8c" stroke-width="2" viewBox="0 0 24 24">
                            <path d="M12 3L2 9l10 6 10-6-10-6z" />
                            <path d="M2 9v6c0 5 10 5 10 0V9" />
                            <path d="M22 9v6c0 5-10 5-10 0" />
                        </svg>
                    </span>
                    {{ chercheur.titre }} - {{ chercheur.domaine }}
                </div>
                <div class="subtitle">
                    <span class="icon">
                        <!-- Icône université -->
                        <svg width="18" height="18" fill="none" stroke="#5c6f8c" stroke-width="2" viewBox="0 0 24 24">
                            <path d="M3 21V7l9-4 9 4v14" />
                            <path d="M9 21V12h6v9" />
                        </svg>
                    </span>
                    {{ chercheur.universite }}
                </div>
            </div>
            <div class="card-content">
                <div class="profile-fields">
                    <div class="profile-field" *ngFor="let field of [
                {label: 'Biographie', key: 'bio', icon: 'text'},
                {label: 'Email', key: 'email', icon: 'mail'},
                {label: 'Téléphone', key: 'tel', icon: 'phone'},
                {label: 'Gouvernement', key: 'gouvernement', icon: 'map'},
                {label: 'Adresse', key: 'adresse', icon: 'home'}
              ]">
                        <label>
                            <span class="icon">
                                <ng-container [ngSwitch]="field.icon">
                                    <svg *ngSwitchCase="'mail'" width="18" height="18" fill="none" stroke="#3b82f6"
                                        stroke-width="2" viewBox="0 0 24 24">
                                        <rect width="20" height="16" x="2" y="4" rx="2" />
                                        <path d="m22 6-8.97 6.66a2 2 0 0 1-2.36 0L2 6" />
                                    </svg>
                                    <svg *ngSwitchCase="'phone'" width="18" height="18" fill="none" stroke="#3b82f6"
                                        stroke-width="2" viewBox="0 0 24 24">
                                        <path
                                            d="M22 16.92v3a2 2 0 0 1-2.18 2 19.86 19.86 0 0 1-8.63-3.07A19.5 19.5 0 0 1 3.15 8.81 19.86 19.86 0 0 1 .92 3.18 2 2 0 0 1 2.92 1h3a2 2 0 0 1 2 1.72c.13 1.09.37 2.16.72 3.2a2 2 0 0 1-.45 2.11l-1.27 1.27a16 16 0 0 0 6.29 6.29l1.27-1.27a2 2 0 0 1 2.11-.45c1.04.35 2.11.59 3.2.72A2 2 0 0 1 22 16.92z" />
                                    </svg>
                                    <svg *ngSwitchCase="'map'" width="18" height="18" fill="none" stroke="#3b82f6"
                                        stroke-width="2" viewBox="0 0 24 24">
                                        <path d="M1 6.5V21l7-2.5 7 2.5V6.5" />
                                        <path d="M8 4l8 2.5v14.5" />
                                        <path d="M16 2.5l7 2.5v14.5" />
                                        <path d="M8 4v14.5" />
                                        <path d="M16 2.5v14.5" />
                                    </svg>
                                    <svg *ngSwitchCase="'home'" width="18" height="18" fill="none" stroke="#3b82f6"
                                        stroke-width="2" viewBox="0 0 24 24">
                                        <path d="M3 9l9-7 9 7" />
                                        <path d="M9 22V12h6v10" />
                                        <path d="M21 22V9a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v13" />
                                    </svg>
                                    <svg *ngSwitchDefault width="18" height="18" fill="none" stroke="#3b82f6"
                                        stroke-width="2" viewBox="0 0 24 24">
                                        <rect x="2" y="7" width="20" height="14" rx="2" />
                                        <path d="M16 3.13V7" />
                                        <path d="M8 3.13V7" />
                                    </svg>
                                </ng-container>
                            </span>
                            {{field.label}}
                        </label>
                        <div *ngIf="editingField !== field.key" class="field-display">
                            <span>{{ chercheur[field.key] }}</span>
                            <button class="btn-edit" (click)="startEdit(field.key)">
                                <svg width="18" height="18" fill="none" stroke="#3b82f6" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
                                    <path d="M12 20h9" />
                                    <path d="M16.5 3.5a2.121 2.121 0 1 1 3 3L7 19.5 3 21l1.5-4L16.5 3.5z" />
                                </svg>
                            </button>
                        </div>
                        <div *ngIf="editingField === field.key" class="field-edit">
                            <input [(ngModel)]="chercheur[field.key]"
                                [type]="field.key === 'email' ? 'email' : 'text'" />
                            <button class="btn-save" (click)="saveEdit(field.key)">
                                <svg width="18" height="18" fill="none" stroke="#fff" stroke-width="2"
                                    viewBox="0 0 24 24">
                                    <path d="M5 13l4 4L19 7" />
                                </svg>
                            </button>
                            <button class="btn-cancel" (click)="cancelEdit()">
                                <svg width="18" height="18" fill="none" stroke="#fff" stroke-width="2"
                                    viewBox="0 0 24 24">
                                    <path d="M18 6L6 18" />
                                    <path d="M6 6l12 12" />
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="profile-field">
                        <label>
                            <span class="icon">
                                <!-- Icône check -->
                                <svg width="18" height="18" fill="none" stroke="#3b82f6" stroke-width="2"
                                    viewBox="0 0 24 24">
                                    <circle cx="12" cy="12" r="10" />
                                    <path d="M16 12l-4 4-2-2" />
                                </svg>
                            </span>
                            Confirmation
                        </label>
                        <span>{{ chercheur.confirm ? 'Confirmé' : 'Non confirmé' }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Bootstrap -->
    <div class="modal fade" id="addProjetModal" tabindex="-1" aria-labelledby="addProjetModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <form [formGroup]="projetForm" (ngSubmit)="onSubmitProjet()">
                    <div class="modal-header">
                        <h5 class="modal-title" id="addProjetModalLabel">Nouveau projet de thèse</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="titre" class="form-label">Titre</label>
                            <input type="text" class="form-control" id="titre" formControlName="titre" required>
                        </div>
                        <div class="mb-3">
                            <label for="lieu" class="form-label">Lieu</label>
                            <input type="text" class="form-control" id="lieu" formControlName="lieu" required>
                        </div>
                        <div class="mb-3">
                            <label for="annee" class="form-label">Année</label>
                            <input type="number" class="form-control" id="annee" formControlName="annee" required>
                        </div>
                        <div class="mb-3">
                            <label for="specialite" class="form-label">Specialite</label>
                            <input type="text" class="form-control" id="specialite" formControlName="specialite"
                                required>
                        </div>
                        <div class="mb-3">
                            <label for="cible" class="form-label">Cible</label>
                            <input type="text" class="form-control" id="cible" formControlName="cible" required>
                        </div>
                        <div class="mb-3">
                            <label for="description" class="form-label">Description</label>
                            <textarea class="form-control" id="description" formControlName="description" rows="3"
                                required></textarea>
                        </div>


                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                        <button type="submit" class="btn btn-primary" [disabled]="projetForm.invalid">Ajouter</button>
                    </div>
                </form>
            </div>
        </div>
    </div>